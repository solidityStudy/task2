# NFT项目完整操作指南

## 🎯 项目目标
在Sepolia测试网上发行一个图文并茂的NFT，完成从合约编写到NFT铸造的全流程。

## 📋 准备工作

### 1. 环境准备
- **浏览器**：Chrome或Firefox（推荐Chrome）
- **钱包**：MetaMask浏览器扩展
- **开发环境**：Remix IDE（在线版本）
- **存储服务**：Pinata账户（用于IPFS上传）

### 2. 获取测试币
1. 访问Sepolia测试网水龙头：
   - [Alchemy Sepolia Faucet](https://sepoliafaucet.com/)
   - [Chainlink Faucet](https://faucets.chain.link/sepolia)
2. 连接MetaMask钱包
3. 申请测试ETH（通常需要0.1-0.5 ETH用于gas费）

## 🔧 第一步：配置MetaMask钱包

### 添加Sepolia测试网
1. 打开MetaMask扩展
2. 点击网络下拉菜单
3. 选择"添加网络"
4. 填入Sepolia网络信息：
   ```
   网络名称：Sepolia Test Network
   新RPC URL：https://sepolia.infura.io/v3/YOUR_INFURA_KEY
   或使用：https://rpc.sepolia.org
   链ID：11155111
   货币符号：ETH
   区块浏览器URL：https://sepolia.etherscan.io
   ```
5. 保存并切换到Sepolia网络

### 确认钱包状态
- 确保钱包中有足够的测试ETH
- 记录你的钱包地址（后续铸造NFT时需要）

## 🖼️ 第二步：准备NFT素材

### 1. 准备图片
- **格式要求**：JPG、PNG、GIF等常见格式
- **尺寸建议**：正方形，推荐512x512或1024x1024像素
- **文件大小**：建议小于10MB
- **内容**：可以是艺术作品、照片、设计图等

### 2. 上传图片到IPFS

#### 使用Pinata上传图片
1. 访问 [Pinata.cloud](https://pinata.cloud)
2. 注册并登录账户
3. 点击"Upload"按钮
4. 选择"File"上传你的图片
5. 上传完成后，复制IPFS哈希值
6. 图片的完整IPFS链接格式：`ipfs://QmYourImageHashHere`

#### 验证图片上传
- 通过IPFS网关查看：`https://gateway.pinata.cloud/ipfs/你的哈希值`
- 确保图片能正常显示

### 3. 创建元数据JSON文件

参考项目中的`metadata-example.json`文件，创建你的元数据：

```json
{
  "name": "我的第一个NFT #1",
  "description": "这是我在以太坊测试网上铸造的第一个NFT",
  "image": "ipfs://bafkreicrkqlhhcptjmyk5cy6qzlsoouw4m6zpvjhkvsdbxs5x7ewbdo55i",
  "attributes": [
    {
      "trait_type": "类型",
      "value": "学习作品"
    },
    {
      "trait_type": "稀有度", 
      "value": "普通"
    }
  ]
}
```

#### 上传元数据到IPFS
1. 将修改好的JSON文件保存到本地
2. 在Pinata中上传这个JSON文件
3. 获取元数据的IPFS哈希值
4. 元数据的完整链接：`ipfs://bafkreigafmfigkvbtng2wmtwlvwzmbc27jf2fxnn5a2mp2hjnxsleynhki`

## 💻 第三步：在Remix中部署合约

### 1. 打开Remix IDE
1. 访问 [Remix IDE](https://remix.ethereum.org)
2. 在文件浏览器中创建新文件
3. 将`MyNFT.sol`合约代码复制到Remix中

### 2. 编译合约
1. 切换到"Solidity Compiler"标签页
2. 选择编译器版本：0.8.0或更高版本
3. 点击"Compile MyNFT.sol"
4. 确保编译成功，没有错误信息

### 3. 连接MetaMask
1. 切换到"Deploy & Run Transactions"标签页
2. 在"Environment"中选择"Injected Provider - MetaMask"
3. MetaMask会弹出连接请求，点击"连接"
4. 确认当前网络为Sepolia测试网

### 4. 部署合约
1. 在"Contract"下拉菜单中选择"MyNFT"
2. 在部署参数中填入：
   - `name`：你的NFT集合名称（如："我的NFT集合"）
   - `symbol`：NFT符号（如："MNC"）
3. 点击"Deploy"按钮
4. MetaMask会弹出交易确认，检查gas费后点击"确认"
5. 等待交易确认（通常1-2分钟）

### 5. 记录合约地址
- 部署成功后，在Remix控制台中找到合约地址
- 复制并保存这个地址，后续查看NFT时需要用到

## 🎨 第四步：铸造NFT

### 1. 使用Remix铸造
1. 在已部署的合约中找到`mintNFT`函数
2. 填入参数：
   - `recipient`：你的钱包地址
   - `metadataURI`：元数据的IPFS链接（`ipfs://你的元数据哈希值`）
3. 点击"transact"按钮
4. 在MetaMask中确认交易
5. 等待交易确认

### 2. 验证铸造结果
1. 交易确认后，调用`totalMinted`函数查看总铸造数量
2. 调用`tokensOfOwner`函数，输入你的地址查看拥有的NFT
3. 调用`tokenURI`函数，输入token ID查看元数据链接

### 3. 铸造参数说明
- **recipient（接收地址）**：填入你的MetaMask钱包地址，格式如：`0x1234...abcd`
- **metadataURI（元数据链接）**：填入完整的IPFS链接，格式如：`ipfs://QmYourMetadataHashHere`
- 确保两个参数都正确填写，否则交易会失败

## 🔍 第五步：查看和验证NFT

### 1. 在Etherscan上查看
1. 访问 [Sepolia Etherscan](https://sepolia.etherscan.io)
2. 搜索你的合约地址
3. 在"Contract"标签页中可以看到合约信息
4. 在"Token Transfers"中可以看到NFT转移记录

### 2. 在OpenSea测试网查看
1. 访问 [OpenSea Testnet](https://testnets.opensea.io)
2. 连接你的MetaMask钱包
3. 在个人资料中查看你的NFT
4. 注意：NFT可能需要几分钟到几小时才会在OpenSea上显示

### 3. 手动添加到OpenSea
如果NFT没有自动显示：
1. 访问：`https://testnets.opensea.io/assets/sepolia/合约地址/token_id`
2. 替换其中的合约地址和token_id
3. 点击"Refresh metadata"按钮

## 🎉 第六步：分享和展示

### 1. 获取NFT链接
- OpenSea链接：`https://testnets.opensea.io/assets/sepolia/合约地址/token_id`
- Etherscan链接：`https://sepolia.etherscan.io/token/合约地址?a=token_id`

### 2. 截图保存
- 在OpenSea上截图你的NFT
- 保存交易哈希作为铸造证明
- 记录所有相关链接

## ⚠️ 常见问题和解决方案

### 1. 交易失败
**原因**：Gas费不足或网络拥堵
**解决**：
- 增加gas费用
- 等待网络不繁忙时重试
- 检查钱包余额是否充足

### 2. NFT不显示图片
**原因**：IPFS链接问题或元数据格式错误
**解决**：
- 检查metadataURI参数是否正确填写
- 验证JSON格式是否正确
- 确认图片可以通过IPFS网关访问
- 检查元数据JSON中的image字段是否指向正确的IPFS哈希

### 3. OpenSea不显示NFT
**原因**：索引延迟或元数据问题
**解决**：
- 等待几小时让OpenSea索引
- 手动刷新元数据
- 检查合约是否符合ERC721标准

### 4. 合约编译错误
**原因**：Solidity版本不匹配或语法错误
**解决**：
- 检查pragma版本声明（应为0.8.0或更高）
- 确保使用正确的OpenZeppelin版本（4.x或更高）
- 检查语法是否正确
- 注意参数名称不要与内置函数冲突（如使用metadataURI而非tokenURI）

## 📚 扩展学习

### 1. 进阶功能
- 添加铸造费用
- 实现白名单功能
- 添加版税设置
- 实现盲盒机制

### 2. 优化建议
- 使用代理合约模式
- 实现批量铸造
- 添加暂停功能
- 优化gas消耗

### 3. 安全考虑
- 重入攻击防护
- 整数溢出保护
- 访问控制优化
- 前端验证

## 🔗 有用的链接

- [OpenZeppelin文档](https://docs.openzeppelin.com/)
- [ERC721标准](https://eips.ethereum.org/EIPS/eip-721)
- [OpenSea元数据标准](https://docs.opensea.io/docs/metadata-standards)
- [Remix IDE文档](https://remix-ide.readthedocs.io/)
- [MetaMask使用指南](https://metamask.io/faqs/)
- [IPFS文档](https://docs.ipfs.io/)

## 🎊 恭喜完成！

如果你成功完成了所有步骤，恭喜你已经：
1. ✅ 编写了一个完整的NFT智能合约
2. ✅ 学会了使用IPFS存储元数据
3. ✅ 在测试网上部署了智能合约
4. ✅ 成功铸造了你的第一个NFT
5. ✅ 学会了在区块链浏览器和NFT市场查看NFT

这是你在Web3世界的重要一步！继续学习和探索更多区块链技术吧！
